{% extends "base.html" %}
{% block content %}
<h2 class="mb-3 text-center">Résumé des dépenses</h2>

<canvas id="chart" class="my-4"></canvas>

<table class="table table-bordered">
  <thead>
    <tr><th>Catégorie</th><th>Type</th><th>Total ($)</th></tr>
  </thead>
  <tbody>
    {% for c, t, m in resume %}
    <tr><td>{{ c }}</td><td>{{ t }}</td><td>{{ "%.2f"|format(m) }}</td></tr>
    {% endfor %}
  </tbody>
</table>

<script src="{{ url_for('static', filename='chart.min.js') }}"></script>
<script>
const ctx = document.getElementById('chart');
new Chart(ctx, {
  type: 'pie',
  data: {
    labels: {{ categories|tojson }},
    datasets: [{
      data: {{ montants|tojson }},
      backgroundColor: ['#4e79a7','#f28e2b','#e15759','#76b7b2','#59a14f','#edc949']
    }]
  }
});
</script>
{% endblock %}
